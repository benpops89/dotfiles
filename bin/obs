#!/bin/bash

# Script to move notes from inbox to relevant folders
# based on area or resource

# Define the source and destinations
VAULT="/home/benpoppy/Documents/vault"

# Define mapping for folders
declare -A file_map
file_map["area"]="2.Areas"
file_map["resource"]="3.Resources"

count=0
rg '(area|resource):\s*[\w]+' -oPt md "$VAULT/0.Inbox" | while read -r line; do
	filename=$(echo "$line" | awk -F':' '{print $1}')
	field=$(echo "$line" | awk -F':' '{print $2}')
	value=$(echo "$line" | awk -F':' ' {sub(/^ +/, "", $3); print $3}')

	mv "$filename" "$VAULT/${file_map["$field"]}/${value^}/"
	((count++))
done

echo "$count files move"
